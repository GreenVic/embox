package third_party.mqtt.paho_mqtt_embedded_c

@Build(stage=2,script="$(EXTERNAL_MAKE)")
@BuildArtifactPath(cppflags="-I$(abspath $(EXTERNAL_BUILD_DIR))/third_party/mqtt/paho_mqtt_embedded_c/libpaho_embed_mqtt3c/paho.mqtt.embedded-c-1.1.0/MQTTClient-C/src/")
@BuildArtifactPath(cppflags="-I$(abspath $(EXTERNAL_BUILD_DIR))/third_party/mqtt/paho_mqtt_embedded_c/libpaho_embed_mqtt3c/paho.mqtt.embedded-c-1.1.0/MQTTPacket/src/")
@BuildArtifactPath(cppflags="-I$(abspath $(EXTERNAL_BUILD_DIR))/third_party/mqtt/paho_mqtt_embedded_c/libpaho_embed_mqtt3c/paho.mqtt.embedded-c-1.1.0/MQTTClient-C/src/linux")
//@BuildDepends(third_party.gcc.libstdcxx)
//@BuildDepends(third_party.gcc.libsupcxx)
static module libpaho_embed_mqtt3c {

	@Cflags("-Wno-address-of-packed-member")
	@DefineMacro("MQTTCLIENT_PLATFORM_HEADER=MQTTLinux.h")
	@IncludePath("$(abspath $(EXTERNAL_BUILD_DIR))/third_party/mqtt/paho_mqtt_embedded_c/libpaho_embed_mqtt3c/paho.mqtt.embedded-c-1.1.0/MQTTClient-C/src/linux")
	@IncludePath("$(abspath $(EXTERNAL_BUILD_DIR))/third_party/mqtt/paho_mqtt_embedded_c/libpaho_embed_mqtt3c/paho.mqtt.embedded-c-1.1.0/MQTTPacket/src/")
	@AddPrefix("^BUILD/extbld/^MOD_PATH/paho.mqtt.embedded-c-1.1.0/")
	source 
		"MQTTPacket/src/MQTTConnectClient.c",
		"MQTTPacket/src/MQTTConnectServer.c",
		"MQTTPacket/src/MQTTDeserializePublish.c",
		"MQTTPacket/src/MQTTFormat.c",
		"MQTTPacket/src/MQTTPacket.c",
		"MQTTPacket/src/MQTTSerializePublish.c",
		"MQTTPacket/src/MQTTSubscribeClient.c",
		"MQTTPacket/src/MQTTSubscribeServer.c",
		"MQTTPacket/src/MQTTUnsubscribeClient.c",
		"MQTTPacket/src/MQTTUnsubscribeServer.c",
		"MQTTClient-C/src/linux/MQTTLinux.c",
		"MQTTClient-C/src/MQTTClient.c"

//	@NoRuntime depends third_party.gcc.libstdcxx
//	@NoRuntime depends third_party.gcc.libsupcxx
}
